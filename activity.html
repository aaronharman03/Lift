<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Activity Calculator</title>
<style>
  body {
    background: #000;
    color: white;
    font-family: system-ui, sans-serif;
    padding: 1rem;
  }
  .container {
    max-width: 400px;
    margin: auto;
    background: #121212;
    padding: 1.5rem;
    border-radius: 1rem;
  }
  h1 {
    text-align: center;
    margin-bottom: 1rem;
  }
  label {
    display: block;
    margin-top: 1rem;
    font-weight: 600;
  }
  select, input {
    width: 100%;
    padding: 0.5rem;
    margin-top: 0.25rem;
    font-size: 1rem;
    border-radius: 0.3rem;
    background: #222;
    color: white;
    border: 1px solid #444;
    box-sizing: border-box;
  }
  button {
    margin-top: 2rem;
    width: 100%;
    padding: 0.75rem;
    background: white;
    color: black;
    font-weight: 700;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
  }
  button:hover {
    background: #ddd;
  }
  #caloriesBurned {
    margin-top: 1.5rem;
    text-align: center;
    font-size: 1.25rem;
    font-weight: 700;
  }
  #error {
    color: #f44;
    margin-top: 0.5rem;
    text-align: center;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Activity Calculator</h1>

  <label for="activity">Select Activity</label>
  <select id="activity">
    <option value="">-- Select an activity --</option>
    <option value="lifting">Lifting (weight training)</option>
    <option value="running">Running</option>
    <option value="walking">Walking</option>
    <option value="standing">Standing</option>
    <option value="cycling">Cycling</option>
    <option value="swimming">Swimming</option>
  </select>

  <label for="minutes">Duration (minutes)</label>
  <input type="number" id="minutes" min="1" max="600" placeholder="e.g. 45" />

  <button id="calcBtn">Calculate Calories Burned</button>

  <div id="caloriesBurned"></div>
  <div id="error"></div>
</div>

<script>
  // MET values for activities (approximate)
  const METS = {
    lifting: 6,
    running: 9,
    walking: 3.5,
    standing: 1.5,
    cycling: 7,
    swimming: 8
  };

  // Load BMR from localStorage
  const bmr = parseFloat(localStorage.getItem('userBMR'));
  const errorDiv = document.getElementById('error');
  const resultDiv = document.getElementById('caloriesBurned');

  if (!bmr) {
    errorDiv.textContent = "Error: BMR not found. Please complete the setup page first.";
  }

  document.getElementById('calcBtn').addEventListener('click', () => {
    errorDiv.textContent = '';
    resultDiv.textContent = '';

    const activity = document.getElementById('activity').value;
    const minutes = parseInt(document.getElementById('minutes').value);

    if (!activity) {
      return (errorDiv.textContent = 'Please select an activity.');
    }
    if (!minutes || minutes < 1 || minutes > 600) {
      return (errorDiv.textContent = 'Please enter a valid duration (1-600 minutes).');
    }
    if (!bmr) {
      return (errorDiv.textContent = 'BMR not found. Please go back and complete the setup.');
    }

    // Calories burned formula:
    // Calories burned per minute = (MET * BMR) / 24 / 60
    // Total calories = calories per minute * minutes

    const met = METS[activity];
    const caloriesPerMinute = (met * bmr) / 24 / 60;
    const totalCalories = caloriesPerMinute * minutes;

    resultDiv.textContent = `Calories burned: ${totalCalories.toFixed(1)} kcal`;
  });
</script>

</body>
</html>

