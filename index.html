<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Workout Tracker Simple Test</title>
</head>
<body>

<h1>Workout Tracker Test</h1>
<button id="add-day">+ Add Workout Day</button>
<div id="days-list"></div>

<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js';
  import {
    getFirestore, doc, getDoc, setDoc, updateDoc, arrayUnion
  } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';

  // Put your Firebase config here:
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const userId = 'demo-user';
  const planRef = doc(db, 'users', userId);

  async function loadPlan() {
    const docSnap = await getDoc(planRef);
    if (!docSnap.exists()) {
      await setDoc(planRef, { days: [] });
      return [];
    } else {
      const data = docSnap.data();
      return data.days || [];
    }
  }

  async function addWorkoutDay() {
    const newDay = {
      id: Date.now().toString(),
      name: 'New Workout Day',
      exercises: []
    };

    await updateDoc(planRef, {
      days: arrayUnion(newDay)
    });

    render();
  }

  async function render() {
    const days = await loadPlan();
    const container = document.getElementById('days-list');
    container.innerHTML = '';
    days.forEach(day => {
      const div = document.createElement('div');
      div.textContent = day.name;
      container.appendChild(div);
    });
  }

  document.getElementById('add-day').addEventListener('click', () => {
    addWorkoutDay().catch(console.error);
  });

  // Initial render
  render();

</script>

</body>
</html>


