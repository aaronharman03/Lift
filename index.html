<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#4CAF50" />
  <link rel="manifest" href="manifest.json" />
  <title>75 Day Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 1rem;
      background: #f9f9f9;
    }
    header, footer {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    select {
      font-size: 1rem;
      padding: 0.5rem;
    }
    #dayTitle {
      text-align: center;
      font-size: 1.5rem;
      margin: 1rem 0;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin: 0.5rem 0;
      display: flex;
      align-items: center;
    }
    input[type="text"], textarea {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
      font-size: 1rem;
      box-sizing: border-box;
    }
    textarea {
      min-height: 80px;
    }
    button {
      font-size: 1.2rem;
      margin: 0 0.5rem;
      padding: 0.5rem 1rem;
    }
  </style>
</head>
<body>
  <div id="app">
    <header>
      <select id="daySelector"></select>
    </header>

    <div id="dayTitle"></div>

    <main id="checklistContainer"></main>

    <footer>
      <button id="prevDay">⬅️</button>
      <button id="nextDay">➡️</button>
    </footer>
  </div>

  <script>
    const TOTAL_DAYS = 75;
    let currentDay = 1;

    function getDefaultTasks() {
      return [
        { text: "Workout", done: false },
        { text: "Read 10 pages", done: false },
        { text: "Drink 1 gallon of water", done: false },
      ];
    }

    function getDayData(day) {
      const data = localStorage.getItem(`day-${day}`);
      return data
        ? JSON.parse(data)
        : { tasks: getDefaultTasks(), notes: "" };
    }

    function saveDayData(day, data) {
      localStorage.setItem(`day-${day}`, JSON.stringify(data));
    }

    function initUI(totalDays, onDayChange) {
      const selector = document.getElementById("daySelector");
      for (let i = 1; i <= totalDays; i++) {
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = `Day ${i}`;
        selector.appendChild(opt);
      }

      selector.addEventListener("change", e => {
        onDayChange(parseInt(e.target.value));
      });
    }

    function renderDay(day) {
      const selector = document.getElementById("daySelector");
      selector.value = day;

      const dayTitle = document.getElementById("dayTitle");
      dayTitle.textContent = `Day ${day} of ${TOTAL_DAYS}`;

      const container = document.getElementById("checklistContainer");
      const { tasks, notes } = getDayData(day);
      container.innerHTML = "";

      const ul = document.createElement("ul");
      tasks.forEach((task, i) => {
        const li = document.createElement("li");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = task.done;
        checkbox.addEventListener("change", () => {
          task.done = checkbox.checked;
          saveDayData(day, { tasks, notes });
        });
        li.appendChild(checkbox);
        li.append(` ${task.text}`);
        ul.appendChild(li);
      });

      const newTaskInput = document.createElement("input");
      newTaskInput.placeholder = "New task (press Enter to add)";
      newTaskInput.type = "text";
      newTaskInput.addEventListener("keypress", e => {
        if (e.key === "Enter" && newTaskInput.value.trim()) {
          tasks.push({ text: newTaskInput.value.trim(), done: false });
          saveDayData(day, { tasks, notes });
          renderDay(day);
        }
      });

      const noteInput = document.createElement("textarea");
      noteInput.value = notes || "";
      noteInput.placeholder = "Add notes...";
      noteInput.addEventListener("blur", () => {
        saveDayData(day, { tasks, notes: noteInput.value });
      });

      container.appendChild(ul);
      container.appendChild(newTaskInput);
      container.appendChild(noteInput);
    }

    function updateDay(day) {
      currentDay = day;
      renderDay(currentDay);
    }

    document.addEventListener("DOMContentLoaded", () => {
      initUI(TOTAL_DAYS, updateDay);
      renderDay(currentDay);

      document.getElementById("prevDay").addEventListener("click", () => {
        if (currentDay > 1) updateDay(currentDay - 1);
      });

      document.getElementById("nextDay").addEventListener("click", () => {
        if (currentDay < TOTAL_DAYS) updateDay(currentDay + 1);
      });

      // Register service worker
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
      }
    });
  </script>
</body>
</html>


