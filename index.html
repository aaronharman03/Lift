<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Workout Planner</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      display: flex;
      height: 100vh;
      background: #fafafa;
      color: #222;
    }
    #sidebar {
      width: 220px;
      background: #fff;
      border-right: 1px solid #ddd;
      overflow-y: auto;
      padding: 1rem;
    }
    #sidebar h2 {
      margin-top: 0;
      font-size: 1.2rem;
      border-bottom: 1px solid #ddd;
      padding-bottom: 0.5rem;
    }
    #workoutList {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #workoutList li {
      padding: 0.4rem 0.6rem;
      cursor: pointer;
      border-radius: 4px;
      user-select: none;
    }
    #workoutList li:hover {
      background: #eee;
    }
    #workoutList li.active {
      background: #007bff;
      color: white;
      font-weight: 600;
    }
    #main {
      flex: 1;
      padding: 1rem 2rem;
      overflow-y: auto;
    }
    .exercise-row {
      display: flex;
      gap: 0.6rem;
      align-items: center;
      margin-bottom: 0.6rem;
    }
    .exercise-row input {
      width: auto;
      flex-shrink: 0;
      padding: 0.3rem 0.4rem;
      font-size: 0.9rem;
    }
    .exercise-row input.name {
      flex-grow: 1;
      width: 120px;
    }
    .sets input {
      width: 40px;
      text-align: center;
      border-radius: 3px;
    }
    button {
      padding: 0.5rem 1rem;
      background: #007bff;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
    }
    .remove-btn {
      background: #dc3545;
      font-weight: bold;
      padding: 0 0.5rem;
      cursor: pointer;
      border-radius: 4px;
      border: none;
      color: white;
      user-select: none;
    }
    .remove-btn:hover {
      background: #b02a37;
    }
  </style>
</head>
<body>
  <div id="sidebar">
    <h2>My Workouts</h2>
    <ul id="workoutList"></ul>
    <button onclick="createWorkout()">+ New Workout</button>
  </div>
  <div id="main">
    <h2 id="workoutTitle">Select a workout</h2>
    <div id="exerciseContainer"></div>
    <button onclick="addExercise()">+ Add Exercise</button>
    <button onclick="saveWorkout()">Save</button>
  </div>

  <script>
    let workouts = JSON.parse(localStorage.getItem('weeklyWorkouts')) || {};
    let currentWorkout = null;

    const workoutListEl = document.getElementById('workoutList');
    const workoutTitleEl = document.getElementById('workoutTitle');
    const exerciseContainer = document.getElementById('exerciseContainer');

    function renderWorkoutList() {
      workoutListEl.innerHTML = '';
      Object.keys(workouts).forEach(name => {
        const li = document.createElement('li');
        li.textContent = name;
        li.className = name === currentWorkout ? 'active' : '';
        li.onclick = () => selectWorkout(name);
        workoutListEl.appendChild(li);
      });
    }

    function selectWorkout(name) {
      currentWorkout = name;
      workoutTitleEl.textContent = name;
      renderWorkoutList();
      renderExercises();
    }

    function createWorkout() {
      const name = prompt("Workout name (e.g. Push, Pull, Legs):");
      if (!name) return;
      if (!workouts[name]) workouts[name] = [];
      currentWorkout = name;
      saveData();
      renderWorkoutList();
      renderExercises();
    }

    function renderExercises() {
      exerciseContainer.innerHTML = '';
      const exercises = workouts[currentWorkout] || [];
      exercises.forEach((ex, idx) => {
        const row = document.createElement('div');
        row.className = 'exercise-row';

        const nameInput = document.createElement('input');
        nameInput.className = 'name';
        nameInput.placeholder = 'Exercise';
        nameInput.value = ex.name || '';
        nameInput.oninput = e => ex.name = e.target.value;

        const weightInput = document.createElement('input');
        weightInput.type = 'number';
        weightInput.placeholder = 'Weight';
        weightInput.value = ex.weight || '';
        weightInput.oninput = e => ex.weight = e.target.value;

        const setsDiv = document.createElement('div');
        setsDiv.className = 'sets';
        ex.sets = ex.sets || ['', '', ''];
        ex.sets.forEach((val, sidx) => {
          const setInput = document.createElement('input');
          setInput.type = 'number';
          setInput.placeholder = 'Reps';
          setInput.value = val;
          setInput.oninput = e => ex.sets[sidx] = e.target.value;
          setsDiv.appendChild(setInput);
        });

        const delBtn = document.createElement('button');
        delBtn.textContent = 'Ã—';
        delBtn.className = 'remove-btn';
        delBtn.onclick = () => {
          workouts[currentWorkout].splice(idx, 1);
          renderExercises();
        };

        row.appendChild(nameInput);
        row.appendChild(weightInput);
        row.appendChild(setsDiv);
        row.appendChild(delBtn);
        exerciseContainer.appendChild(row);
      });
    }

    function addExercise() {
      if (!currentWorkout) return alert('Select a workout first');
      workouts[currentWorkout].push({ name: '', weight: '', sets: ['', '', ''] });
      renderExercises();
    }

    function saveWorkout() {
      saveData();
      alert('Workout saved!');
    }

    function saveData() {
      localStorage.setItem('weeklyWorkouts', JSON.stringify(workouts));
    }

    renderWorkoutList();
  </script>
</body>
</html>
