<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Workout Tracker</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 800px;
    margin: 20px auto;
    padding: 0 20px;
  }
  h1, h2, h3, h4 {
    color: #333;
  }
  label {
    display: block;
    margin-top: 10px;
  }
  input[type="text"], input[type="number"], input[type="date"] {
    padding: 6px;
    margin-top: 4px;
    width: 100%;
    max-width: 300px;
    box-sizing: border-box;
  }
  button {
    margin-top: 10px;
    padding: 8px 12px;
    cursor: pointer;
  }
  .exercise {
    border: 1px solid #ddd;
    padding: 10px;
    margin-bottom: 10px;
  }
  .exercise h4 {
    margin: 0 0 6px 0;
  }
  .sets-row {
    display: flex;
    gap: 8px;
    margin-bottom: 6px;
    align-items: center;
  }
  .sets-row input {
    width: 80px;
  }
  .sets-row button {
    padding: 4px 8px;
    font-size: 14px;
  }
  .workout-list {
    list-style: none;
    padding: 0;
  }
  .workout-item {
    border: 1px solid #ccc;
    padding: 12px;
    margin-bottom: 10px;
    cursor: pointer;
    background-color: #fefefe;
  }
  .workout-item:hover {
    background-color: #f0f8ff;
  }
  .workout-details {
    margin-top: 10px;
  }
  .remove-btn {
    background: #e74c3c;
    color: white;
    border: none;
  }
  .remove-btn:hover {
    background: #c0392b;
  }

  /* Prevent zoom on input focus on mobile */
  input, select, textarea, button {
    font-size: 16px;
  }
</style>
</head>
<body>

<h1>Workout Tracker</h1>

<section id="add-workout-section">
  <h2>Add Workout</h2>
  <form id="workout-form">
    <label>
      Date:
      <input type="date" id="workout-date" required />
    </label>
    <label>
      Workout Type:
      <input type="text" id="workout-type" placeholder="e.g., Workout A, Legs" required />
    </label>

    <div id="exercises-container">
      <h3>Exercises</h3>
    </div>

    <button type="button" id="add-exercise-btn">Add Exercise</button>
    <br/>
    <button type="submit">Save Workout</button>
  </form>
</section>

<section>
  <h2>Past Workouts</h2>
  <ul id="workouts-list" class="workout-list"></ul>
</section>

<script>
  // Storage key
  const STORAGE_KEY = "workoutTrackerData";

  // Elements
  const workoutForm = document.getElementById("workout-form");
  const workoutDateInput = document.getElementById("workout-date");
  const workoutTypeInput = document.getElementById("workout-type");
  const exercisesContainer = document.getElementById("exercises-container");
  const addExerciseBtn = document.getElementById("add-exercise-btn");
  const workoutsList = document.getElementById("workouts-list");

  // Load workouts from localStorage
  let workouts = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

  // Render workouts list with updated format
  function renderWorkouts() {
    workoutsList.innerHTML = "";
    if (workouts.length === 0) {
      workoutsList.innerHTML = "<li>No workouts logged yet.</li>";
      return;
    }
    workouts.forEach((workout, index) => {
      const li = document.createElement("li");
      li.className = "workout-item";

      li.innerHTML = `
        <strong>${workout.date}</strong> â€” ${workout.workoutType}
        <div class="workout-details" style="display:none;">
          ${workout.exercises
            .map(ex => {
              const weight = ex.sets.length ? ex.sets[0].weight : "-";
              const repsList = ex.sets.map(s => s.reps).join(", ");
              return `<div>${ex.name} - Weight: ${weight} - Sets: ${repsList}</div>`;
            }).join("")}
        </div>
      `;

      li.addEventListener("click", () => {
        const details = li.querySelector(".workout-details");
        details.style.display = details.style.display === "none" ? "block" : "none";
      });

      workoutsList.appendChild(li);
    });
  }

  renderWorkouts();

  // Add a new exercise input block
  function createExerciseBlock() {
    const exerciseDiv = document.createElement("div");
    exerciseDiv.className = "exercise";

    exerciseDiv.innerHTML = `
      <label>
        Exercise Name:
        <input type="text" class="exercise-name" required />
      </label>
      <div class="sets-container">
        <h4>Sets</h4>
      </div>
      <button type="button" class="add-set-btn">Add Set</button>
      <button type="button" class="remove-exercise-btn remove-btn">Remove Exercise</button>
    `;

    // Add initial set row
    const setsContainer = exerciseDiv.querySelector(".sets-container");
    addSetRow(setsContainer);

    // Add event to add set button
    exerciseDiv.querySelector(".add-set-btn").addEventListener("click", () => {
      addSetRow(setsContainer);
    });

    // Remove exercise button event
    exerciseDiv.querySelector(".remove-exercise-btn").addEventListener("click", () => {
      exerciseDiv.remove();
    });

    return exerciseDiv;
  }

  // Add a single set input row to sets container
  function addSetRow(container) {
    const div = document.createElement("div");
    div.className = "sets-row";

    div.innerHTML = `
      <input type="number" min="0" step="0.1" placeholder="Weight" class="set-weight" required />
      <input type="number" min="1" step="1" placeholder="Reps" class="set-reps" required />
      <button type="button" class="remove-set-btn remove-btn">Remove Set</button>
    `;

    // Remove set button event
    div.querySelector(".remove-set-btn").addEventListener("click", () => {
      div.remove();
    });

    container.appendChild(div);
  }

  // Handle Add Exercise button
  addExerciseBtn.addEventListener("click", () => {
    exercisesContainer.appendChild(createExerciseBlock());
  });

  // Handle form submit
  workoutForm.addEventListener("submit", (e) => {
    e.preventDefault();

    const date = workoutDateInput.value;
    const workoutType = workoutTypeInput.value.trim();

    if (!date) {
      alert("Please select a date");
      return;
    }
    if (!workoutType) {
      alert("Please enter workout type");
      return;
    }

    // Gather exercises
    const exerciseDivs = exercisesContainer.querySelectorAll(".exercise");
    if (exerciseDivs.length === 0) {
      alert("Please add at least one exercise");
      return;
    }

    const exercises = [];

    for (const exerciseDiv of exerciseDivs) {
      const nameInput = exerciseDiv.querySelector(".exercise-name");
      const exerciseName = nameInput.value.trim();
      if (!exerciseName) {
        alert("Exercise name cannot be empty");
        return;
      }

      const setsContainer = exerciseDiv.querySelector(".sets-container");
      const setRows = setsContainer.querySelectorAll(".sets-row");
      if (setRows.length === 0) {
        alert(`Please add at least one set for exercise "${exerciseName}"`);
        return;
      }

      const sets = [];
      for (const row of setRows) {
        const weightInput = row.querySelector(".set-weight");
        const repsInput = row.querySelector(".set-reps");
        const weight = parseFloat(weightInput.value);
        const reps = parseInt(repsInput.value, 10);

        if (isNaN(weight) || weight <= 0) {
          alert(`Please enter a valid weight for exercise "${exerciseName}"`);
          return;
        }
        if (isNaN(reps) || reps <= 0) {
          alert(`Please enter valid reps for exercise "${exerciseName}"`);
          return;
        }
        sets.push({ weight, reps });
      }

      exercises.push({ name: exerciseName, sets });
    }

    // Add workout to list and save
    workouts.unshift({ date, workoutType, exercises });
    localStorage.setItem(STORAGE_KEY, JSON.stringify(workouts));

    // Reset form
    workoutForm.reset();
    exercisesContainer.innerHTML = "";
    renderWorkouts();
  });

  // Add one initial exercise block on page load
  exercisesContainer.appendChild(createExerciseBlock());
</script>

</body>
</html>




